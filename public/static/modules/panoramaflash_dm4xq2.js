_jsload2&&_jsload2('panoramaflash', 'z.extend(Oa.prototype,{Mi:function(){for(var a=0;a<B.ur.length;a++)B.ur[a](this);this.Of!=s&&this.dispatchEvent(new P("onvisible_poi_type_changed"),{visiblePOIType:this.Of});this.hl=this.fh();this.Jr=this.jd=t;this.Eq={};this.hd=new Yj(this);this.TS();this.CQ();this.EQ();if(this.Za||this.Lb)this.Za?this.vc(this.Za,this.Ke):this.sa(this.Lb)},EQ:function(){var a=this;setInterval(function(){if(a.Xb()){var b=a.fh();b.pb(a.hl)||(a.hd.set("size",{width:b.width,height:b.height}),a.hl=b,a.dispatchEvent(new P("size_changed")))}}, 80)},TS:function(){var a=this.hd,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new P("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new P("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.O4===s?b.Qk({haveBreakId:t}):b.Qk({haveBreakId:q});b.dispatchEvent(new P("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,e;if(b.jd!==q){b.jd=q;a=this;b.Za=a.get("id");"street"!= b.Ke&&(b.Ke="street",b.Ny("inter"));b.bo=a.get("links");e=a.get("position");b.Lb=e;e=a.get("pov");!b.Da.heading&&!b.Da.pitch?b.Da=e:(e.heading!=b.Da.heading||e.pitch!=b.Da.pitch)&&a.set("pov",b.Da);e=a.get("zoom");1==!b.Mc&&1!=e?b.Mc==e:b.Mc!=e&&a.set("zoom",b.Mc);e=s;for(var f in b.Je)e=b.Je[f],delete b.Je[f],b.Ga(e);b.j.navigationControl===t&&a.set("navigationControlVisible",t);var g=function(b){a.Ds("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:t,innerFloor:b.indoorFloorControl})}; g(b.j);b.addEventListener("clickonroad_changed",function(){g(b.j)});b.addEventListener("links_visible_changed",function(){g(b.j)});b.addEventListener("onindoorfloor_options_changed",function(){g(b.j)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.j.navigationControl)});if(0<b.Sg.length){f=0;for(e=b.Sg.length;f<e;f++)b.Sg[f].register(b.C,b,b.hd);var i="",k=[];f=0;for(e=b.xr.length;f<e;f++)i=b.xr[f].iN,k=b.xr[f].hN,b[i].apply(b,k)}b.j.visible?b.show(): b.U()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new P("error"))});a.addEventListener("id_changed",function(a){if(b.jd||b.Za==s||"inter"==b.Ke)b.Za=a.data;b.dispatchEvent(new P("onid_changed"))});a.addEventListener("position_changed",function(a){b.jd?b.Lb=b.hd.get("position"):b.Lb==s&&(b.Lb=a.data);b.dispatchEvent(new P("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.jd||b.Da.heading==s)b.Da=a.data;b.dispatchEvent(new P("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.jd||0==b.bo.length)b.bo=a.data;b.dispatchEvent(new P("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.jd||b.Mc==s)b.Mc=a.data;b.dispatchEvent(new P("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.Ny(a.data.panoType);b.dispatchEvent(new P("oncopyright_changed"),{copyright:a.data.copyright});if(b.Jr){for(var e in b.Eq)b[e](b.Eq[e]);b.Jr=t;b.Eq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Je[a.data.markerId];a.dispatchEvent(new P("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Je[a.data.markerId];a.dispatchEvent(new P("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Je[a.data.markerId];a.dispatchEvent(new P("onmouseout"),{type:"mouseout",target:a})})},CQ:function(){var a=this;z.M(this.C,ia.ca.Te?"DOMMouseScroll":"onmousewheel",function(b){if(a.j.enableScrollWheelZoom&&a.j.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.fa()+c;a.Qc(c);Cb(b)}})}, vc:function(a,b,c){"object"===typeof b&&(c=b,b=l);if(!this.jd||a&&a!=this.Za)this.jd||(this.Za=a,this.Ke=b||"street",this.Lb=s),this.hd.set("id",{id:a,type:b||"street"}),this.Jr=q,c&&c.pov&&this.Pc(c.pov)},sa:function(a){if(!this.jd||a&&!this.Lb.pb(a))this.jd||(this.Lb=a,this.Za=s),this.hd.set("position",a),this.Jr=q},Pc:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.jd?this.Jr?this.Eq.setPov=a:this.hd.set("pov",a):this.Da=a)},Qc:function(a){a!=this.Mc&&(a>ae&&(a=ae),a<be&& (a=be),this.jd?this.hd.set("zoom",a):this.Mc=a,this.Eq.setZoom=a)},show:function(){this.j.visible=q;this.Bf&&(this.B&&this.B.La()===this.C)&&z.D.show(this.Bf);this.hd&&this.hd.tr&&(this.hd.tr.style.left="0");this.jd&&(this.ul===this.Xb()&&this.hd.set("id",{id:this.ul,type:this.iT||"street"}),this.dispatchEvent(new P("onvisible_changed")))},U:function(){this.j.visible=t;this.jd&&(this.ul=this.Za,this.iT=this.Ke,this.hd.Ds("closePano"));this.Za=s;this.hd&&this.hd.tr&&(this.hd.tr.style.left="-9999px"); this.dispatchEvent(new P("onvisible_changed"))},aC:function(a){function b(a,b){return function(){a.xr.push({iN:b,hN:arguments})}}if(this.jd)a.register(this.C,this,this.hd);else for(var c=a.getPanoMethodList(),e="",f=0,g=c.length;f<g;f++)e=c[f],this[e]=b(this,e);this.Sg.push(a)},rF:function(a){this.jd&&a.dispose();for(var b=this.Sg.length;b--;)this.Sg[b]===a&&this.Sg.splice(b,1)},au:function(a){this.Of=a||"none";this.dispatchEvent(new P("onvisible_poi_type_changed"),{visiblePOIType:this.Of})},Ga:function(a){this.Je[a.ld]= a;this.jd&&this.dispatchEvent(new P("onadd_overlay"),{overlay:a})},Qb:function(a){var b=a.ld;this.jd&&this.dispatchEvent(new P("onremove_overlay"),{overlay:a});delete this.Je[b]},Vo:function(){var a=this.hd.get("indoorData");a&&a.pid&&this.vc(a.pid)},FF:function(a){this.hd.set("interactiveState",a)}});jj=Oa.prototype; T(jj,{setId:jj.vc,setPosition:jj.sa,setPov:jj.Pc,setZoom:jj.Qc,show:jj.show,hide:jj.U,addPlugin:jj.aC,removePlugin:jj.rF,addOverlay:jj.Ga,removeOverlay:jj.Qb,setPanoramaPOIType:jj.au,exitInter:jj.Vo,setInteractiveState:jj.FF});function Zj(){this.GT=(this.BA=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.HI=["id","width","height","align","data"];this.II="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} z.extend(Zj.prototype,{create:function(a,b){var c=this.cS(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.YL(a))&&this.BA){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=s);window.AP&&setTimeout(window.AP,0)}a.parentNode.removeChild(a)},IX:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.BA)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(g){}}();a=function(){return c};return c}var b=this;return a()},YL:function(a){return document.getElementById(a)},qH:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),e=0;e<c;e++){var f=a[e],g=b[e];if(!f||!g)return!f&&!g?0:f?1:-1;f=Number(f);g=Number(g);if(f<g)return-1;if(f>g)return 1}return 0}, cS:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],e=s,f=s;for(e in b)f=b[e],c.push(e+"="+encodeURIComponent(f));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(e=this.IX(),!e||b&&0>this.qH(e,b)||c&&0<this.qH(e,c))return a.altHtml||"";e=["<object",this.GT];a.data=a.movie;for(b=0;b<this.HI.length;b++)c=this.HI[b],a.hasOwnProperty(c)&&e.push(" ",c,\'="\',a[c],\'"\');e.push(">");for(b=0;b<this.II.length;b++)c=this.II[b],a.hasOwnProperty(c)&& e.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');e.push("</object>");return e.join("")}});function $j(a,b){this.P=a;this.ZR=b;this.Mh={};this.Gz()}z.extend($j.prototype,{Gz:function(){var a=this,b=a.P;b.addEventListener("add_overlay",function(b){b=b.overlay;b.na(a.P,a.ZR);a.Mh[b.ld]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Mh[b.ld]})}});z.extend(ee.prototype,{na:function(a,b){this.P=a;this.ga()||this.sa(this.P.ga());this.Aa=b;this.ib()},ib:function(){var a=this.ga(),a=ec.Wd.kh(a),a={markerId:this.ld,catalog:"FD01",name:this.xk(),rank:this.Yo(),x:a.x,y:a.y,color:this.zm(),hoverColor:this.kM,backgroundHoverColor:this.jK,borderColor:this.borderColor,borderHoverColor:this.oK,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.pE||this.getImageData())a.imageUrl=this.pE, a.imageData=this.getImageData(),a.size=this.cb(),a.image=this.zx(),a.catalog="FD02",this.cb()&&(a.width=this.cb()[0],a.height=this.cb()[1]);this.Aa.ZN(a)},hide:function(){this.Qa=t;this.Aa&&this.Aa.Ko(this.ld,"visible",t)},show:function(){this.Qa=q;this.Aa&&this.Aa.Ko(this.ld,"visible",q)},isVisible:w("Qa"),Nf:function(a,b){this.Aa&&("position"==a&&(b=ec.Wd.kh(b),b={lng:b.x,lat:b.y}),this.Aa.Ko(this.ld,a,b))},remove:function(){this.dispatchEvent(new P("onremove"),{type:"remove",target:this});this.Aa.SK([this.ld])}});var ak={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},bk={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; z.extend(he.prototype,{na:function(a,b){this.P=a;this.Aa=b;this.ib()},ib:function(){var a=this.ga(),a=ec.Wd.kh(a),b=this.uS(),c=this.$D();this.Aa.ZN({markerId:this.ld,catalog:b,name:this.gp(),rank:this.Yo(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},uS:function(){var a=this.ap().match(/.*\\/(.*)/)[1],b;for(b in bk)if(bk[b][1]==a)return ak[b]},hide:function(){this.Qa=t;this.Aa.Ko(this.ld,"visible",t)},show:function(){this.Qa=q;this.Aa.Ko(this.ld,"visible",q)},isVisible:w("Qa"), Nf:function(a,b){"position"==a&&(b=ec.Wd.kh(b),b={lng:b.x,lat:b.y});this.Aa.Ko(this.ld,a,b)},remove:function(){this.dispatchEvent(new P("onremove"),{type:"remove",target:this});this.Aa.SK([this.ld])}});Yj.jo=new ec(s,{of:"api"});function Yj(a){z.lang.Ca.call(this);a&&(this.P=a,this.Lg=s,this.DH=a.C.clientWidth,this.CH=a.C.clientHeight,new $j(a,this))}Yj.$P=B.vg("pano");z.lang.ta(Yj,z.lang.Ca,"PanoramaFlashWraper"); z.extend(Yj.prototype,{ZN:function(a){this.Ds("addMarkers",[a])},SK:function(a){this.Ds("removeMarkers",[a])},Ko:function(a,b,c){var e={};e.markerId=a;e[b]=c;this.set("markerProperty",e)},get:function(a){var b=s;"position"==a?(b=this.Lg.get("mercatorPosition"),b=ec.Wd.xj(new Q(b.mercatorX,b.mercatorY))):b=this.Lg.get(a);return b},set:function(a,b){var c=this;"position"==a?Yj.jo.kj(b,function(a){a&&a.id?c.P.vc(a.id):c.dispatchEvent(new P("pano_error"))}):"id"==a?c.Lg==s?c.aT(c.P):c.Lg.set&&c.Lg.set("panoOptions", {id:b.id,panoType:b.type,width:c.DH,height:c.CH}):c.Lg&&c.Lg.set&&c.Lg.set(a,b)},Ds:function(a,b){return this.Lg.doAction(a,b)},v3:w("tr"),aT:function(a){var b=this,c=a.j.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Lg=q;Yj.jo.Jx(function(e){var f="",g="";"inter"===a.Ke?g=a.Za:f=a.Za;f={pid:f,iid:g,panoType:a.Ke,heading:a.Da.heading,pitch:a.Da.pitch,width:b.DH,height:b.CH,panoUrl:c,panoTileUrl:Yj.$P.join("|"),domain:ec.Ou,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.aa};g=a.j.swfSrc; e&&(e.panoUdt&&e.panoUdt.version&&f)&&(f.udtVersion=e.panoUdt.version);e&&(e.panoSwfAPI&&e.panoSwfAPI.version&&f)&&(f.panoUrl=f.panoUrl+"?version="+e.panoSwfAPI.version,g=g+"?version="+e.panoSwfAPI.version);b.Lg=b.pR(a.C,f,g)})},pR:function(a,b,c){var e=new Zj,f="PanoramaFlash"+this.aa,g=s,g=L("div");g.style.position="absolute";g.id="PanoramaFlashWraper"+this.aa;g.style.top="0";g.style.left="0";g.style.height="100%";g.style.width="100%";g.style.zIndex=1200;this.tr=g;a.appendChild(g);e.create({id:f, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},g);return e.YL(f)}});var ck=Yj.prototype;T(ck,{get:ck.get,set:ck.set,doAction:ck.Ds}); ');