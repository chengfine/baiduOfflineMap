_jsload2&&_jsload2('vectordrawlib', 'function Pf(a){this.pI=q;this.j=z.object.extend(a||{},{ag:q});Mc.call(this,this.j);this.Bg={};this.loaded=t;this.Nt=s;this.hC=t;this.kK={road:"rd",water:"wt",building:"bd",land:"ld",government:"gv",point:"pts"};this.gF={market:"mt",food:"fd",communications:"cm",hotel:"ht",attractions:"at",recreation:"rc"}}Pf.prototype=new Mc; Pf.prototype.na=function(a){if(!this.loaded){this.loaded=q;var b=this;b.map=a;b.Va=b.map.Va;b.map=a;b.jx=t;b.LK=s;b.te="df";b.j.poiElements&&b.j.poiElements.name&&(b.te=b.gF[b.j.poiElements.name]);b.Re=b.j.style||"normal";b.ln=b.j.styleStr||s;b.gq=200;b.Od=s;b.be=0;b.yb=this.Va.Kj(0);b.Pd=this.Va.Kj(10);b.Va.od.appendChild(this.yb);b.Va.od.appendChild(this.Pd);b.Va.yb=b.yb;b.Va.Pd=this.Pd;b.Kb=new B.VectorDrawLib;b.ns="";b.j.features&&(b.ns=b.yX(b.j.features));b.Kb.wC=b.Re;b.$l();b.Re&&"normal"!== b.Re||b.ln&&0<b.ln.length?b.Wt(b.Re,b.ln,function(){b.map.addEventListener("click",function(a){b.be++;if(b.be===1)b.Od=setTimeout(function(){b.yu(a);b.be=0},b.gq);else{clearTimeout(b.Od);b.be=0;return t}});b.yb.innerHTML="";b.Pd.innerHTML="";b.ce(q)}):(b.ce(),b.map.addEventListener("click",function(a){b.be++;if(b.be===1){if(!a.fb)b.Od=setTimeout(function(){b.yu(a);b.be=0},b.gq)}else{clearTimeout(b.Od);b.be=0;return t}}));b.map.K.fj&&(H()&&b.If==l)&&(b.If=new B.JG(b.map),b.map.Ga(b.If))}}; z.extend(Pf.prototype,{$l:function(){var a=this;setTimeout(function(){a.map.addEventListener("poilayervisiblechange",function(b){a.VV(b)});a.map.addEventListener("moveend",function(){a.ce()});a.map.addEventListener("zoomend",function(){a.Dy();a.jx=t;a.ce(q)});a.map.addEventListener("onresize",function(){a.ce()});Ua()&&(a.map.addEventListener("onmoving",function(){a.ce()}),a.map.addEventListener("onmaptypechange",function(){a.ce()}));a.map.addEventListener("mousemove",function(b){a.map.Sb()&&a.OC(b)})}, 1);a.map.addEventListener("setcustomstyles",function(b){a.xC(b.target)})},yX:function(a){for(var b="",c=0,e=a.length;c<e;c++)b=b+this.kK[a[c]]+",";b&&(this.Kb.Yh=b);return b},Wt:function(a,b,c){if(this.map.Sb()){var e=this,f=B.Wc+"custom/",g;b&&0<b.length?(g="setStyle_"+b.length,f+="mapstyle?styles="+encodeURIComponent(b)):(g="setStyle_"+a,f+="getstyle?customid="+a);g+=this.map.aa;window[g]=function(b,f){var m=z.extend({},e.Kb.Bz);e.Kb.Db=z.extend(m,b);m=B.Bb.we(e.Kb.Db["3181"][1]);e.map.K.Eo=m;e.map.La().style.backgroundColor= m;c(a);e.map.dispatchEvent(new P("onsetmapstylesuccess",f));delete window[g]};oa(f+("&callback="+g+"&udt=20150116"),t)}},kO:function(a){if(this.map.Sb()){for(var b="",c=0,e=a.length;c<e;c++)b=b+(this.kK[a[c]]||"")+",";b==this.ns&&""==!b||(""==b&&(b="no"),this.ns=b,this.Kb.Yh=b,this.Kb.Is({bg:this.vx(this.yb),poi:this.vx(this.Pd)},this.Va,this.te))}},tO:function(a){if(a.name&&this.gF[a.name]){var b=this.gF[a.name];if(a.styles.visibility==q&&this.te!==b&&-1<this.ns.indexOf("pts")){this.te=b;if(this.Pd)for(var c= [],e=[],a=this.Pd.childNodes,b=0,f=a.length;b<f;b++){var g=a[b].id.split("_");c.push([g[1],g[2]]);e.push(a[b])}this.Kb.dD(c,e,this.te,this.Va,s)}}},Lp:function(a){var b=this;b.Wt(a.style,a.styleStr,function(a){b.Re=a;b.Dy();b.Kb.wC=b.Re;var a=b.Kb.Rs,e;for(e in a)delete a[e];"df"!==b.te&&b.nE();b.nF()})},b5:function(a){var b=this,c=[],e=[],f=a.clickFea;b.LK=f;if(a.type){var g=z.$(f.tileId),i=f.tileId;if(b.te==a.type){var k=Math.pow(2,18-b.map.Oa);b.U0();b.Bg[i]={canvas:g,fea:f.fea};b.oL(f,k);var c= this.Bg,m;for(m in c)e=z.$(m).getContext("2d"),b.Kb.mm(e,c[m].fea,k,q);return}b.Dy();b.te=a.type;b.Bg[i]={canvas:g,fea:f.fea};b.oL(f,k)}else{b.vu();if("df"==b.te)return;b.Dy();b.te="df"}if(b.Pd){k=b.Pd.childNodes;m=0;for(a=k.length;m<a;m++)g=k[m].id.split("_"),c.push([g[g.length-3],g[g.length-2]]),e.push(k[m])}b.hC||(b.map.addEventListener("onclickicondrawed",function(a){var c=a.tarPoi.id;b.jx=q;b.Bg&&b.Bg[c]&&(b.Bg[c].fea=a.tarPoi.fea)}),b.hC=q);"df"==b.te?b.vu():b.nE();b.Kb.dD(c,e,b.te,b.Va,f)}, U0:function(){var a=this.Bg,b=Math.pow(2,18-this.map.Oa),c;for(c in a)this.Kb.mm(a[c].canvas.getContext("2d"),a[c].fea,b,t);for(var e in a)delete a[e]},Dy:function(){var a=this.Bg;try{for(var b in a)delete a[b]}catch(c){}},oL:function(a){var b=a.tileId.split("_"),c=b.length,e=parseInt(b[c-3]),f=parseInt(b[c-2]),c=parseInt(b[c-1]),g=e-1,i=e+1,k=f-1,m=f+1,n=this.map.aa.replace(/^TANGRAM_/,""),b=z.$(n+"_poi_"+g+"_"+f+"_"+c),f=z.$(n+"_poi_"+i+"_"+f+"_"+c),o=z.$(n+"_poi_"+e+"_"+k+"_"+c),e=z.$(n+"_poi_"+ e+"_"+m+"_"+c),p=z.$(n+"_poi_"+g+"_"+k+"_"+c),g=z.$(n+"_poi_"+g+"_"+m+"_"+c),k=z.$(n+"_poi_"+i+"_"+k+"_"+c),c=z.$(n+"_poi_"+i+"_"+m+"_"+c);b&&this.mk(b,a.fea);f&&this.mk(f,a.fea);o&&this.mk(o,a.fea);e&&this.mk(e,a.fea);p&&this.mk(p,a.fea);g&&this.mk(g,a.fea);k&&this.mk(k,a.fea);c&&this.mk(c,a.fea)},mk:function(a,b){var c=this.QQ(a.Lc,b[5].u);c&&(this.Bg[a.id]={canvas:a,fea:c})},QQ:function(a,b){try{if(a.length)for(var c=0,e=a.length;c<e;c++){var f=a[c];if(f[5]&&f[5].u&&f[5].u==b)return f}}catch(g){}}, VV:function(a){a.visible==t?(this.Va.od.removeChild(this.Pd),this.te=""):(this.Va.od.appendChild(this.Pd),a=this.Va.pj(this.Pd),this.Kb.dD(a.z5,a.y5,this.te,this.Va))},ce:function(a){this.map.fa();if(this.map.Sb()){this.yb.style.display="block";this.Pd.style.display="block";this.D0(this.yb,this.Pd);this.Va.MK={};var b=this.Va.pj(this.yb,"bg");poiVectorObj=this.Va.pj(this.Pd,"poi");for(var c in this.Bg)z.$(c)||delete this.Bg[c];this.Kb.Is({bg:b,poi:poiVectorObj,isZoomMap:a?q:t},this.Va,this.te)}else{a= this.yb;b=this.Pd;a.style.display="none";b.style.display="none";c=a.childNodes.length;for(c-=1;0<=c;c--){var e=a.childNodes[c];a.removeChild(e)}c=b.childNodes.length;for(c-=1;0<=c;c--)e=b.childNodes[c],b.removeChild(e)}},vx:function(a){if(a){for(var b=[],a=a.childNodes,c=0,e=a.length;c<e;c++){var f=a[c].id.split("_");b.push([f[f.length-3],f[f.length-2],a[c]])}return b}},nF:function(){this.map.Sb()&&this.Kb.Is({bg:this.vx(this.yb),poi:this.vx(this.Pd)},this.Va,this.te)},D0:function(a,b){var c=t;if(a)for(var e= a.childNodes,f=0,g=e.length;f<g;f++)if(e[f].yd==q){c=q;break}if(!c){c=b.childNodes;e=0;for(g=c.length;e<g;e++)c[e].yd=t}},yu:function(a){this.map.K.fj&&(a=this.zs(a),this.map.K.Kw?this.map.K.Kw(a):this.pc(a))},pc:function(a){a?(Ua()&&this.bA(a),H()&&this.If&&this.If.switchTo(a)):H()&&this.If&&this.If.U()},OC:function(a){this.map.K.fj&&(this.zs(a)?(this.map.platform.style.cursor="pointer",this.map.R.$x=q):(this.map.R.$x=t,this.map.platform.style.cursor!=this.map.K.Vb&&0==this.map.R.Qe.length&&(this.map.platform.style.cursor= this.map.K.Vb)))},bA:function(a){(a=a.uid)&&rd.ab(u(),{qt:"inf",uid:a,operate:"mapclick",clicktype:"vector"})},kH:function(a,b,c){var e=this;if(b&&b.content){var f=b.content,g=f.pano||0,c=e.map.xb(c.point);if(!i)var i={};i.isFromMPC=q;var k=f.addr,i=f.street_id||"";if(1==f.poiType||3==f.poiType)k=ab.unique(k.split(";")).join("; ");var m=f.tel;m&&(m=m.replace(/,/g,", "));e.Xq(f.cla);var n=L("div",{style:"font-size:12px;padding:5px 0;overflow:hidden;*zoom:1;"}),b=t;g&&(360>e.map.height?b=q:(g=[],g.push("<div class=\'panoInfoBox\' id=\'panoInfoBox\' title=\'"+ f.name+"\\u5916\\u666f\' title=\'\\u67e5\\u770b\\u5168\\u666f\' >"),g.push("<img filter = \'pano_thumnail_img\' class=\'pano_thumnail_img\' width=323 height=101 border=\'0\' alt=\'"+f.name+"\\u5916\\u666f\' src=\'"+(B.url.proto+B.url.domain.pano[0]+"/pr/?qt=poiprv&uid="+i+"&width=323&height=101&quality=80&fovx=200")+"\' id=\'pano_"+a+"\'/>"),g.push("<div filter = \'panoInfoBoxTitleBg\' class=\'panoInfoBoxTitleBg\'></div><a href=\'javascript:void(0)\' filter=\'panoInfoBoxTitleContent\' class=\'panoInfoBoxTitleContent\' >\\u8fdb\\u5165\\u5168\\u666f&gt;&gt;</a>"), g.push("</div>"),n.innerHTML=g.join("")));k&&(g=L("p",{style:"padding:0;margin:0;line-height:18px;font-size:12px;color:#4d4d4d;"}),g.innerHTML="\\u5730\\u5740\\uff1a"+k,n.appendChild(g));m&&(g=L("p",{style:"padding:0;margin:0;line-height:18px;font-size:12px;color:#4d4d4d;"}),g.innerHTML="\\u7535\\u8bdd\\uff1a"+m,n.appendChild(g));f.tag&&(m=L("p",{style:"padding:0;margin:0;line-height:18px;font-size:12px;color:#4d4d4d;color:#7f7f7f;"}),m.innerHTML="\\u6807\\u7b7e\\uff1a"+f.tag,n.appendChild(m));a="http://api.map.baidu.com/place/detail?uid="+ a+"&output=html&source=jsapi&operate=mapclick&clicktype=vector";m="<div style=\'height:26px;\'><a href=\'"+a+"\' target=\'_blank\' style=\'font-size:14px;color:#4d4d4d;font-weight:bold;text-decoration:none;\' onmouseover=\'this.style.textDecoration=\\"underline\\";this.style.color=\\"#3d6dcc\\"\' onmouseout =\'this.style.textDecoration=\\"none\\";this.style.color=\\"#4d4d4d\\"\'>"+f.name+"</a>";a=new tc(n,{width:322,enableSearchTool:q,title:m+("<a href=\'"+a+"\' target=\'_blank\' style=\'font-size:12px;color:#3d6dcc;margin-left:5px;text-decoration:none;\' onmouseover=\'this.style.textDecoration=\\"underline\\"\' onmouseout =\'this.style.textDecoration=\\"none\\"\'>\\u8be6\\u60c5&raquo;</a>")+ "</div>",enableParano:b});b&&(a.street_id=i);a.addEventListener("open",function(){var a=z.$("panoInfoBox");if(a){var b=f.street_id||"";e.EW("click",function(){Ra(5052);e.Fq(b)},a,"pano_thumnail_img|panoInfoBoxTitleBg|panoInfoBoxTitleContent")}});this.map.pc(a,c)}},Fq:function(a){var b=B.vg("pano","scape/")[0],c=this,e=(new Date).getTime(),f="Pano"+e;B[f]=function(a){var b=c.map.tm(),a=a.content[0];b.vc(a.poiinfo.PID);b.show();b.Pc({heading:a.poiinfo.Dir,pitch:a.poiinfo.Pitch})};e=(new Date).getTime(); oa(b+("?qt=poi&udt=20131021&uid="+a+"&t="+e+"&fn=BMap."+f),t)},Xq:function(a){for(var b=[],c=0,e=a.length;c<e;c++)b.push(a[c][1]),c<e-1&&b.push(", ");return b.join("")},zs:function(a){var b=this.Pd.getElementsByTagName("canvas"),c=a.offsetX,e=a.offsetY,f=l,g=l;this.map.cb();for(var g=this.map.oa().$c(),i=0,k=b.length;i<k;i++){var m=this.Sf(b[i]);if(c>m.left&&c<=m.left+g&&e>m.top&&e<=m.top+g){f=b[i];break}}if(f==l||f.Lc==l)return t;g=f.Lc;b=0;for(k=g.length;b<k;b++){var c=g[b],e=c[0],i=c[1],n=this.Kb.Db[c[3]]|| window.Db[c[3]],o=n[0],n=this.Kb.Zs(n,this.Kb.Db[c[4]]||window.Db[c[4]])[1],p=c[5]||{};if(n==l||"empty"==n)break;if(2!=o&&(3!=o&&4!=o&&0<n.length&&p.u)&&(iconX=i[0]+m.left,iconY=i[1]+m.top,a.offsetX>=iconX-15&&a.offsetX<=iconX+15&&a.offsetY>=iconY-15&&a.offsetY<=iconY+15))return{type:c[5].c||"",name:e,uid:p.u||"",point:{x:iconX,y:iconY},clickFea:{tileId:f.id,tile:f,fea:c}}}return t},Zx:function(){return/M040/i.test(navigator.userAgent)},Sf:function(a){for(var b=a.offsetLeft,c=a.offsetTop,a=a.offsetParent;a&& a!=this.map.La();)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{top:c,left:b}},xC:function(a){if(this.map.Sb()){this.map.oa().j.Yb=18;var a=this.Nt=a,b;for(b in a)switch(b){case "style":this.Lp(a);break;case "styleStr":this.Lp(a);break;case "features":this.kO(a[b]);break;case "poiElements":this.tO(a[b])}}},nE:function(){this.vu();"dark"==this.Re?z.D.Ua(this.yb,"light_gray_background"):z.D.Ua(this.yb,"gray_background")},vu:function(){z.D.Pb(this.yb,"gray_background");z.D.Pb(this.yb,"light_gray_background")}, EW:function(a,b,c,e){var f=this;c.Om||(c.Om=[],c.handle={});c.Om.push({filter:e,nm:b});c.handle[a]||(c.addEventListener(a,function(a){for(var b=a.target;b!=c;){f.Fb(c.Om,function(c,e){RegExp(e.filter).test(b.getAttribute("filter"))&&e.nm.call(b,a,b.getAttribute("filter"))});b=b.parentNode}},t),c.handle[a]=q)},Fb:function(a,b){for(var c=0,e=a.length;c<e;c++)b(c,a[c])}});window.VectorLayer=Pf;Qf=1;Rf=2;Sf=3;Tf=4;Uf=5; function Wf(){this.Km=t;this.lt=[B.url.proto+B.url.domain.TILE_ONLINE_URLS[1]+"/"];this.eG=[B.url.proto+B.url.domain.TILE_ONLINE_URLS[1]+"/gvd/?",B.url.proto+B.url.domain.TILE_ONLINE_URLS[2]+"/gvd/?",B.url.proto+B.url.domain.TILE_ONLINE_URLS[3]+"/gvd/?",B.url.proto+B.url.domain.TILE_ONLINE_URLS[4]+"/gvd/?"];this.Va=s;this.rk={};this.map=s;this.$e=this.ej=0;this.Yh=s;this.Db=window.Db;this.Bz=z.extend({},window.Db);this.fm={dark:{backColor:"#2D2D2D",textColor:"#bfbfbf",iconUrl:"vector/dicons"},normal:{backColor:"#F3F1EC", textColor:"#c61b1b",iconUrl:"vector/nicons_hd"},light:{backColor:"#EBF8FC",textColor:"#017fb4",iconUrl:"vector/licons"}};this.Rs={};this.op=q;this.ok=s;this.am=/.*GT-I9300.*Version\\/\\d+.*Safari\\/\\d+\\.\\d+$/ig.test(navigator.userAgent)||/baiduboxapp/ig.test(navigator.userAgent)} Wf.prototype={Is:function(a,b,c){this.FO=(new Date).getTime();var e=a.bg,f=a.poi;this.VF=e.length;this.ej=0;this.$e=e.length;this.xK();this.Km||(this.Km=q,this.map=b.map,this.Va=b,this.qc=this.map.K.devicePixelRatio,0<this.$e&&(this.le=parseInt(e[0][2].style.width,10)));this.map.cb();this.GO=0;this.iF=c;b=this.map.Oa;this.$m=Math.pow(2,18-b);this.Dj?this.Dj.length=0:this.Dj=[];this.map.dispatchEvent(new P("onvectorbegin"));if(this.VF<=f.length)var g=0,i=this.$e;else g=0,i=f.length;for(;g<i;g++)e[g][2].yd= t,f[g][2].yd=t,e[g][2].uq=(new Date).getTime(),f[g][2].uq=(new Date).getTime(),this.vy(e[g][0],e[g][1],e[g][2],b,f[g][2]||s,c,a.isZoomMap)},xK:function(){for(var a in this.rk)delete this.rk[a]},dD:function(a,b,c,e,f){this.Dj?this.Dj.length=0:this.Dj=[];this.FO=(new Date).getTime();var e=this.map.Oa,g=this.map.Ka(),g=new J(g.lng,g.lat);this.iF=c;this.ok=f;for(var f=0,i=a.length;f<i;f++){b[f].uq=(new Date).getTime();var k=a[f][0],m=a[f][1],n="_"+parseInt(k+""+m+""+e).toString(36);"df"==c&&this.rk[n]? (k=this.rk[n],b[f].Lc=k,this.hj(b[f]),this.Po(k,b[f],e,s,g,e)):this.vy(k,m,b[f],e,s,c)}},vy:function(a,b,c,e,f,g){var i=this,k=i.eG,m=Math.abs(parseInt(a,10)+parseInt(b,10))%k.length,n="x="+a+"&y="+b+"&z="+e,o=i.map.aa.replace(/^TANGRAM_/,""),p="undefined"!=typeof TVC?TVC.fK.R5:{},v=p.version?p.version:"002",p=p.wn?p.wn:"20150601",x="",y=o+(0>a?"_":"")+(0>b?"$":"")+parseInt(Math.abs(a)+""+Math.abs(b)+""+e,10).toString(36);if(c&&f)if(i.Yh)if("no"==i.Yh)x="&layers=&features="+i.Yh,c.Lc=s,f.Lc=s,this.am? (g=c.getContext("2d"),a=f.getContext("2d"),g.canvas.width=g.canvas.width,a.canvas.width=a.canvas.width,a=g=s):(i.hj(c),i.hj(f)),i.$e=0;else if(-1<i.Yh.indexOf("pts"))if("pts,"==i.Yh)c.Lc=s,this.am?(x=c.getContext("2d"),x.canvas.width=x.canvas.width,x=s):i.hj(c),x="&layers="+g;else{i.$e<2*i.VF&&(i.$e*=2);a=i.Yh.split(",");b="";x=0;for(o=a.length;x<o;x++)"pts"!=a[x]&&""!=a[x]&&(b=a[x]+","+b);x="&layers=bg,"+g+"&features="+b;b=a=s}else f.Lc=s,this.am?(x=f.getContext("2d"),x.canvas.width=x.canvas.width, x=s):i.hj(f),x="&layers=bg&features="+i.Yh;else x="&layers=bg,"+g;else x="&layers="+g;var k=(k[m]?k[0]:k[m])+"qt=lgvd&"+n+"&styles=pl"+x+"&f=mwebapp&v="+v+"&udt="+p+"&fn=BMap."+y,m=i.map.Ka(),A=new J(m.lng,m.lat),E=i.map.fa();B[y]=function(a){var b=a.content;if(b){c.rq=(new Date).getTime();f&&(f.rq=(new Date).getTime());var g=i.map,a=g.Ka(),g=g.fa();if(!a.pb(A)||g!=E){delete B[y];return}var a={},k;for(k in b)"df"==k&&(i.rk[y]=b[k]),a[k]=b[k];for(var m in a){k=a;for(var b=m,g=a[m],n=0,o=g.length;n< o;n++)for(var p=g[n][1],v=0,x=0,Ma=0,sb=p.length/2;Ma<sb;Ma++)v+=p[2*Ma]/10,x+=p[2*Ma+1]/10,p[2*Ma]=v,p[2*Ma+1]=x;k[b]=g;"bg"==m?c.tq=(new Date).getTime():f?f.tq=(new Date).getTime():c.tq=(new Date).getTime()}for(var Za in a)"bg"==Za?(c.Lc=a[Za],c&&i.hj(c),i.Po(a[Za],c,e,s,A,E)):f!==s?(f.Lc=a[Za],i.hj(f),i.Po(a[Za],f,e,s,A,E)):(c.Lc=a[Za],c&&i.hj(c),i.Po(a[Za],c,e,s,A,E))}delete B[y]};oa(k)},hj:function(a){var a=a.getContext("2d"),b=this.le*this.qc;this.am||(a.save(),a.clearRect(0,0,b,b),a.restore())}, bD:function(a,b,c){a.fillStyle=c;a.fillRect(0,0,b,b)},Po:function(a,b,c,e,f,g){b.xV=(new Date).getTime();var i=b.getContext("2d"),k=0;this.am?(i.canvas.width=i.canvas.width,i.scale(this.qc,this.qc)):1<this.qc&&!b.og&&(i.scale(this.qc,this.qc),b.og=q);i.textBaseline="bottom";-1<b.id.indexOf("bg")&&this.map.K.Eo&&this.bD(i,this.le,this.map.K.Eo);for(var m=this.op,n=a.length,e=0,o=this.Db;e<n;e++){var p=a[e],v=o[p[3]]||window.Db[p[3]],x=o[p[4]]||window.Db[p[4]];p.wc=v;p.Sc=x;if(v[0]==Sf)k++,this.mm(i, p,s,g);else break}b.wV=(new Date).getTime();p=this.map.Ka();c=this.map.fa();if(p.pb(f)&&c==g){b.d_=(new Date).getTime();for(var y=[];e<n;e++){var p=a[e],v=o[p[3]]||window.Db[p[3]],x=o[p[4]]||window.Db[p[4]];p.wc=v;p.Sc=x;17<=c&&(v[5]&&0<v[5].length&&1==v[5][0]&&6==v[5][1]&&x&&0<x.length)&&(v[5].length=0,v[6]=0,x[6]=0);if(v[0]==Rf)k++,y.push(p);else break}this.uF(i,y,c,this.$m);b.c_=(new Date).getTime();p=this.map.Ka();c=this.map.fa();if(p.pb(f)&&c==g){for(b.DZ=(new Date).getTime();e<n;e++)p=a[e], v=o[p[3]]||window.Db[p[3]],x=o[p[4]]||window.Db[p[4]],p.wc=v,p.Sc=x,p[5]&&p[5].u&&this.ok&&p[5].c==this.ok.fea[5].c?("df"!==this.ok.fea[5].c?this.mm(i,p,this.$m,q,g):p[5].u==this.ok.fea[5].u?this.mm(i,p,this.$m,q,g):this.mm(i,p,this.$m,t,g),p[5].u==this.ok.fea[5].u&&(c=new P("onclickicondrawed"),c.tarPoi={id:b.id,fea:p,equal:this.hW(p[1],this.ok.fea[1])},this.map.dispatchEvent(c))):this.mm(i,p,this.$m,t,g),k++;b.yd=q;this.WZ();a=(new Date).getTime();b.CZ=a;b.SG=a;a=b.rq-b.uq;g=b.tq-b.rq;__drawTime= b.SG-b.tq;this.Dj.push({id:b.id,downLoadTime:a,parseDataTime:g,drawTime:__drawTime,restRate:k+"/"+e,areaTime:b.wV-b.xV,roadTime:b.c_-b.d_,otherTime:b.CZ-b.DZ,timeline:{start:b.uq,downLoadComplete:b.rq,parseComplete:b.tq,drawComplete:b.SG}});this.GO++;1==this.GO&&this.map.dispatchEvent(new P("onfirstvectorloaded"));if(this.$e==this.ej){if(m){this.op=t;for(e=b=0;k=this.Dj[e];e++)b+=k.drawTime;this.map.cb();B.Fn("cus.fire","time",{z_vectorfirstdrawtime:b})}e=(new Date).getTime()-this.FO;c=new P("onvectorloaded"); c.VF=this.$e;c.A5=e;c.u5=this.Dj;this.map.dispatchEvent(c);this.map.dispatchEvent(new P("ontilesloaded"))}}}},WZ:function(){this.ej++;2>=this.$e-this.ej&&this.map.dispatchEvent(new P("onallvectorloaded"))},hW:function(a,b){var c=t;if(a.length&&b.length&&a.length==b.length){for(var e=0,f=a.length;e<f&&a[e]===b[e];e++);e==f&&(c=q)}return c},mm:function(a,b,c,e,f){switch(b.wc[0]){case Sf:this.mx(a,b,f);break;case Rf:this.ue(a,b[1],b.wc,b.Sc,b[2],c);break;case Tf:this.aD(a,b);break;default:this.cD(a, b,e)}},mx:function(a,b,c){var e=b.wc,f=e[2],b=b[1];a.fillStyle=B.Bb.we(e[1]);a.beginPath();a.moveTo(b[0],b[1]);for(var e=2,g=b.length;e<g;e+=2)a.lineTo(b[e],b[e+1]);a.closePath();a.fill();0<f.length&&(a.strokeStyle=a.fillStyle,a.lineWidth=12<=c?3:f[3],a.stroke())},ue:function(a,b,c,e,f,g){if(c||e){var i=B.Bb.we,k=B.Bb.Bx,m=B.Bb.Cx;if(this.vt(c,e))firstColor=backColor=(i=e&&e[5]&&0<e[5].length?q:t)?B.Bb.we(c[1]):"rgba(0, 0, 0, 0)",backLineWidth=c[2],foreLineWidth=i?e[2]:c[2],intervalLen=i?e[5][0]: c[5][0],intervalColor=B.Bb.we(i?e[1]:c[1]),c=Math.round(f/g),B.Bb.WW(a,b,intervalLen,backLineWidth,foreLineWidth,firstColor,c,backColor,intervalColor);else if(1==c[7])a.strokeStyle=i(c[1]),a.fillStyle=a.strokeStyle,a.lineWidth=c[2],a.lineCap=k(c[3]),a.lineJoin=m(c[4]),B.Bb.$K(a,b,a.lineWidth);else{a.beginPath();a.moveTo(b[0],b[1]);f=2;for(g=b.length;f<g;f+=2)a.lineTo(b[f],b[f+1]);a.strokeStyle=i(c[1]);a.lineCap=k(c[3]);a.lineJoin=m(c[4]);a.lineWidth=c[2];a.stroke();e&&(a.strokeStyle=i(e[1]),a.lineWidth= e[2],a.lineCap=k(e[3]),a.lineJoin=m(e[4]),a.stroke())}}},aD:function(a,b){var c=b[1],e=b.wc,f=B.Bb.we,g=f(e[1]),i=f(e[2]),k=e[4],f=f(k[1]),k=k[2],e=e[5];B.Bb.eD(a,c,0,e,0,g,i,f,k)},cD:function(a,b,c){a.save();var e=b[1],f=b[0],g=b[2],b=this.Zs(b.wc,b.Sc),i=b[1],k=0;if(!("undefined"==typeof i||"number"==typeof i)){var m=-1<i.indexOf("biaopai");i.indexOf("ditie");if(0<i.length){var n="undefined"!=typeof TVC?TVC.fK.N0:{},n=this.lt[i.length%this.lt.length]+this.fm.normal.iconUrl+"/"+i+".png?v="+(n.version? n.version:"002")+"&udt="+(n.wn?n.wn:"201500601"),o=new Image,p=e[0],v=e[1];2<e.length&&(k+=2);var x=this;if(m)(function(a,b,c,e,f,g,i,k,m,n,p){o.onload=function(){c.drawImage(this,a-this.width/4,b-this.height/4,this.width/2,this.height/2);x.Js(c,e,f,g,i,k,m,n,p);o.onload=s;delete o.onload;o=s}})(p,v,a,e,b,g,f,i,k,m,c),o.src=n;else{var y=x.Rs[i];y?a.drawImage(y,p-y.width/4,v-y.height/4,y.width/2,y.height/2):(function(b,c,e){o.onload=function(){a.drawImage(this,b-this.width/4,c-this.height/4,this.width/ 2,this.height/2);e&&(x.Rs[i]=o);o.onload=s;delete o.onload;o=s}}(p,v,x.op),o.src=n)}}!m&&(b[2]&&0<b[2].length)&&this.Js(a,e,b,g,f,i,k,m,c)}a.restore()},Js:function(a,b,c,e,f,g,i,k,m){var n=B.Bb.we,o=c[2];if(f&&0<o.length){var p=[],c=o[2],v=o[3],x=o[4],o=o[5];p.push(B.Bb.JL(x));p.push(c+"px");k||p.push("Helvetica Neue,Arial,Hiragino Sans GB,\\u9ed1\\u4f53,sans-serif");a.font=p.join(" ");a.fillStyle=m?"#c61b1b":n(v);if(m=B.Bb.xM(x))a.strokeStyle=n(o),a.lineWidth=k?0.5:2;for(var g=-1<g.indexOf("biaopai_xiandao"), p=f.split("\\\\"),v=0,y=p.length,A=b.length;v<y&&i<A;v++){var E=b[i],C=b[i+1],f=p[v],f=a.measureText(f).width,F=c,i=i+2;10<e&&350>e&&this.cG(a,E,C,e);var D=1;B.Bb.wM(x)&&(B.Bb.nL(a,E-f/2,C-F/2,f,F,{fillStyle:n(o)}),D=0);g?(a.save(),a.scale(0.9,0.9),m&&a.strokeText(p[v],(E-f/2+1)/0.9,(C+F/2+1)/0.9),a.fillText(p[v],(E-f/2+1)/0.9,(C+F/2+1)/0.9),a.restore()):(D=k?2:D,m&&a.strokeText(p[v],E-f/2,C+F/2+D),a.fillText(p[v],E-f/2,C+F/2+D))}}},Zs:function(a,b){var c=[Qf,"",[]];a&&(a[0]==Uf?c[2]=a:c=a);b&&(b[0]== Uf?c[2]=b:c[1]=b[1]);return c},cG:function(a,b,c,e){e=e/180*Math.PI;cv=Math.cos(e);sv=Math.sin(e);yy=xx=cv;xy=sv;yx=-sv;x0=b-b*cv-c*sv;y0=c+b*sv-c*cv;a.transform(xx,yx,xy,yy,x0,y0)},uF:function(a,b,c,e){if(16>=c)for(var c=0,f=b.length;c<f;){for(var g=b[c],i=this.ct(g.wc,g.Sc),g=c+1;g<f;g++){var k=b[g];if(i!=this.ct(k.wc,k.Sc))break}for(var m=c;m<g;m++){var n=b[m],o=n[1],i=n.wc,k=n.Sc;this.vt(i,k)?n.wE=q:this.ue(a,o,i,t)}for(m=c;m<g;m++)n=b[m],n.wE?this.ue(a,n[1],n.wc,n.Sc,n[2],e):this.ue(a,n[1],n.Sc, t);c=g}else{c=0;for(f=b.length;c<f;c++)g=b[c],i=g.wc,k=g.Sc,m=i[6]&1?q:t,k&&!m&&(m=k[6]&1?q:t),m?g.FE=q:this.ue(a,g[1],i,t);c=0;for(f=b.length;c<f;c++)g=b[c],i=g.wc,k=g.Sc,g.FE?this.ue(a,g[1],i,k,g[2],e):this.ue(a,g[1],k,t)}},ct:function(a,b){if(!b)return 0;var c=a[6],e=b[6];if(1==c||1==e)return 1;switch(c){case 2:return 2==e?1:0;case 4:case 6:case 8:case 10:return 4<=e&&10>=e?1:0;default:return 0}},vt:function(a,b){return a&&0<a.length&&0<a[5].length||b&&0<b.length&&0<b[5].length?q:t}}; B.VectorDrawLib=Wf; ');